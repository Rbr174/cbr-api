# Парсер валют ЦБ РФ

## Описание

Асинхронный backend-сервис на FastAPI для получения и хранения курсов валют ЦБ РФ.

Проект реализует:

* REST API для управления задачами (создание, чтение, обновление, удаление)
* WebSocket канал для уведомлений клиентов в реальном времени
* Фоновая задача, которая периодически получает курсы валют с сайта ЦБ РФ
* Принудительный запуск фоновой задачи 
* Асинхронная работа с SQLite
* Интеграция с брокером сообщений NATS

## REST API

* **GET /tasks** — список курсов валют
* **GET /tasks/{id}** — получить курс по ID
* **POST /tasks** — создать запись
* **PATCH /tasks/{id}** — обновить запись
* **DELETE /tasks/{id}** — удалить запись

* **POST /tasks/run**– принудительно запустить фоновую задачу

## WebSocket

* **ws://127.0.0.1:8000/ws/items** — канал уведомлений о событиях задач и обновлениях курсов

## Установка

1. Клонируйте репозиторий

```bash
git clone https://github.com/Rbr174/cbr-api.git
cd currency_backend
```

2. Установите зависимости

```bash
pip install -r requirements.txt
```
## Запуск

3. Запустить NATS

```bash
docker run -p 4222:4222 nats
```

4. Запуск приложения

```bash
uvicorn app.main:app --reload 
```

## Проверка работы

1. Откройте браузер на [http://127.0.0.1:8000/docs] для Swagger UI
2. Подключитесь к WebSocket клиенту для проверки уведомлений в реальном времени


